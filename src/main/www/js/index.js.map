{"version":3,"file":"index.js","sources":["radio.js"],"sourcesContent":["// import {html, render, TemplateResult} from \"lit-html\";\nclass Broadcast {\n    constructor(broadcast) {\n        this.id = broadcast.id;\n        this.name = broadcast.name;\n        this.episodes = new Map();\n        broadcast.episodes.forEach((episode) => {\n            this.episodes.set(episode.id, new Episode(episode));\n        });\n    }\n}\nclass Episode {\n    constructor(episode) {\n        this.id = episode.id;\n        this.title = episode.title;\n        this.date = episode.date ? new Date(Date.parse(episode.date)) : null;\n        this.songs = new SongList(episode.songs);\n    }\n    get dateFormat() {\n        if (this.date) {\n            const month = this.date.getUTCMonth() + 1;\n            return this.date.getUTCDate() + \".\" + (month > 9 ? \"\" : \"0\") + month + \".\" + this.date.getUTCFullYear();\n        }\n        else {\n            return \"unbekannt\";\n        }\n    }\n}\nclass Song {\n    constructor(song) {\n        this.title = song.title;\n        this.performer = song.performer;\n        this.composer = song.composer;\n        this.number = song.number;\n        this.album = song.album;\n        this.genre = song.genre;\n        this.year = song.year;\n    }\n}\nclass SongList {\n    constructor(object) {\n        this.list = [];\n        this.hasTitle = false;\n        this.hasPerformer = false;\n        this.hasComposer = false;\n        this.hasNumber = false;\n        this.hasAlbum = false;\n        this.hasGenre = false;\n        this.hasYear = false;\n        object === null || object === void 0 ? void 0 : object.forEach(entry => {\n            entry === null || entry === void 0 ? void 0 : entry.forEach(object => {\n                const song = new Song(object);\n                this.list.push(song);\n                if (song.title) {\n                    this.hasTitle = true;\n                }\n                if (song.performer) {\n                    this.hasPerformer = true;\n                }\n                if (song.composer) {\n                    this.hasComposer = true;\n                }\n                if (song.number) {\n                    this.hasNumber = true;\n                }\n                if (song.album) {\n                    this.hasAlbum = true;\n                }\n                if (song.genre) {\n                    this.hasGenre = true;\n                }\n                if (song.year) {\n                    this.hasYear = true;\n                }\n            });\n        });\n    }\n}\nclass Radio extends HTMLElement {\n    constructor() {\n        super();\n        console.info(\"Radio constructor!\");\n    }\n    connectedCallback() {\n        this.renderBroadcast();\n        // const template = this.test(\"Yeah!\");\n        // render(template, document.body);\n    }\n    get space() {\n        return this.getAttribute(\"space\");\n    }\n    set space(space) {\n        this.setAttribute(\"space\", space);\n    }\n    // private test(name: string): TemplateResult {\n    //   return html`<h1>Wochenende: ${name}</h1>`\n    // }\n    renderBroadcast() {\n        const urlParams = new URLSearchParams(window.location.search);\n        if (urlParams.has(\"space\")) {\n            this.space = urlParams.get(\"space\");\n        }\n        this.insertAdjacentHTML(\"afterbegin\", `<div class=\"form-group\">\n<label>Songliste vom ...\n<select class=\"form-control\"></select></label></div>`);\n        // const location = \"json/ta.json\";\n        const location = `json/${this.space}.json`;\n        this.getBroadcast(location).then(broadcast => {\n            const select = this.querySelector(\"select\");\n            select.addEventListener(\"change\", (event) => {\n                const optionalParams = event.currentTarget;\n                console.log(\"test %o\", optionalParams);\n                console.log(\"test %o\", optionalParams.value);\n                const id = optionalParams.value;\n                const oldTable = this.querySelector(\"table\");\n                if (oldTable) {\n                    this.removeChild(oldTable); // Alte Tabelle weg, todo: besser mit LIT HTML\n                }\n                if (id) {\n                    const episode = broadcast.episodes.get(id);\n                    this.insertAdjacentHTML(\"beforeend\", `<table class=\"table table-striped\">\n<colgroup>\n<col/>\n<col/>\n<col/>\n<col/>\n<col/>\n<col/>\n<col/>\n</colgroup>\n<thead class=\"thead-dark\">\n  <tr>\n    <th class=\"${episode.songs.hasTitle ? '' : 'd-none'}\">Titel</th>\n    <th class=\"${episode.songs.hasPerformer ? '' : 'd-none'}\">Interpret</th>\n    <th class=\"${episode.songs.hasComposer ? '' : 'd-none'}\">Komponist</th>\n    <th class=\"${episode.songs.hasNumber ? '' : 'd-none'}\">Nummer</th>\n    <th class=\"${episode.songs.hasAlbum ? '' : 'd-none'}\">Album</th>\n    <th class=\"${episode.songs.hasGenre ? '' : 'd-none'}\">Genre</th>\n    <th class=\"${episode.songs.hasYear ? '' : 'd-none'}\">Jahr</th>\n  </tr></thead><tbody></tbody></table>`);\n                    const table = this.querySelector(\"tbody\");\n                    table.innerHTML = \"\";\n                    episode.songs.list.forEach(song => {\n                        table.insertAdjacentHTML(\"beforeend\", `<tr>\n<td class=\"${episode.songs.hasTitle ? '' : 'd-none'}\">${song.title ? song.title : \"\"}</td>\n<td class=\"${episode.songs.hasPerformer ? '' : 'd-none'}\">${song.performer ? song.performer : \"\"}</td>\n<td class=\"${episode.songs.hasComposer ? '' : 'd-none'}\">${song.composer ? song.composer : \"\"}</td>\n<td class=\"${episode.songs.hasNumber ? '' : 'd-none'}\">${song.number ? song.number : \"\"}</td>\n<td class=\"${episode.songs.hasAlbum ? '' : 'd-none'}\">${song.album ? song.album : \"\"}</td>\n<td class=\"${episode.songs.hasGenre ? '' : 'd-none'}\">${song.genre ? song.genre : \"\"}</td>\n<td class=\"${episode.songs.hasYear ? '' : 'd-none'}\">${song.year ? song.year : \"\"}</td>\n</tr>`);\n                    });\n                }\n            });\n            broadcast.episodes.forEach(episode => {\n                select.insertAdjacentHTML(\"afterbegin\", `<option value=\"${episode.id}\">${episode.dateFormat} (${episode.songs.list.length} Titel)</td></option>`);\n            });\n            // Auswählen der Song-Tabelle für die 1. Episode\n            select.selectedIndex = 0;\n            select.dispatchEvent(new Event(\"change\"));\n        });\n    }\n    getBroadcast(location) {\n        return window.fetch(location)\n            .then(response => response.json())\n            .then((json) => new Broadcast(json));\n    }\n}\ndocument.addEventListener(\"DOMContentLoaded\", function (event) {\n    window.customElements.define(\"radio-songs\", Radio);\n});\n"],"names":[],"mappings":"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"}